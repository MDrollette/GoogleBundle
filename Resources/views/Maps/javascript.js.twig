{% spaceless %}
    GoogleBundle.Map("{{ map_id }}").initialize({
        zoom: {{ zoom }}, 
        center: new google.maps.LatLng( {{ latitude }}, {{ longitude }} ), 
        MapTypeId: google.maps.MapTypeId.{{ type }}
    });

    {% if map.hasMarkers %}
        {% for marker in map.getMarkers %}
            GoogleBundle.Map("{{ map_id }}").addMarker({{ marker.getLatitude }}, {{ marker.getLongitude }}, "{{ marker.getMeta.infowindow|default("") | raw }}");
        {% endfor %}
    {% endif %}

    {% if map.fitToMarkers %}
        GoogleBundle.Map("{{ map_id }}").fitToMarkers();
    {% endif %}

    {% if callback is not empty %}
        GoogleBundle.Map("{{ map_id }}").click({{ callback | raw }});
    {% endif %}
{% endspaceless %}

